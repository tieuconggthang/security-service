# ====== Tomcat thread pool ======
# So thread toi da xu ly request (worker)
server.tomcat.threads.max=${TOMCAT_THREADS_MAX:200}

# So thread du phong toi thieu luon giu san
server.tomcat.threads.min-spare=${TOMCAT_MIN_SPARE:50}

# ====== Ket noi & hang doi accept ======
# So ket noi TCP toi da co the mo dong thoi (per connector)
server.tomcat.max-connections=${TOMCAT_MAX_CONNECTIONS:300}

# Hang doi khi tat ca worker ban (so request cho accept)
server.tomcat.accept-count=${TOMCAT_ACCEPT_COUNT:400}

# Thoi gian cho thiet lap ket noi (ms) truoc khi tu choi
server.tomcat.connection-timeout=${TOMCAT_CONN_TIMEOUT_MS:20000}

# ====== Keep-Alive ======
# Thoi gian idle toi da cho 1 ket noi keep-alive (ms)
server.tomcat.keep-alive-timeout=${TOMCAT_KEEPALIVE_TIMEOUT_MS:20000}

# So request toi da tren mot ket noi keep-alive (<=0 nghia la vo han)
server.tomcat.max-keep-alive-requests=${TOMCAT_MAX_KA_REQ:100}

# ====== Access Log (chan doan/tuning) ======
server.tomcat.accesslog.enabled=${TOMCAT_ACCESSLOG:true}
server.tomcat.accesslog.directory=${TOMCAT_ACCESSLOG_DIR:logs}
server.tomcat.accesslog.prefix=access
server.tomcat.accesslog.suffix=.log
server.tomcat.accesslog.rotate=true
server.tomcat.accesslog.pattern=%h %l %u %t "%r" %s %b %D
# %D = thoi gian xu ly (microseconds) -> huu ich de tune

# ====== MBean (quan sat runtime) ======
server.tomcat.mbeanregistry.enabled=${TOMCAT_JMX:true}
